import streamlit as st
import pandas as pd

st.set_page_config(page_title="My POS System", layout="wide")

# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≥‡∏•‡∏≠‡∏á (‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° Google Sheets)
if 'inventory' not in st.session_state:
    st.session_state.inventory = pd.DataFrame([
        {"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£": "‡∏Å‡∏≤‡πÅ‡∏ü‡∏î‡∏≥", "‡∏£‡∏≤‡∏Ñ‡∏≤": 50},
        {"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£": "‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß", "‡∏£‡∏≤‡∏Ñ‡∏≤": 55},
        {"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£": "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á", "‡∏£‡∏≤‡∏Ñ‡∏≤": 25}
    ])

if 'cart' not in st.session_state:
    st.session_state.cart = []

st.title("üè™ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô (POS)")

col1, col2 = st.columns([2, 1])

with col1:
    st.subheader("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤")
    for index, row in st.session_state.inventory.iterrows():
        if st.button(f"{row['‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£']} ({row['‡∏£‡∏≤‡∏Ñ‡∏≤']} ‡∏ö‡∏≤‡∏ó)"):
            st.session_state.cart.append({"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£": row['‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£'], "‡∏£‡∏≤‡∏Ñ‡∏≤": row['‡∏£‡∏≤‡∏Ñ‡∏≤']})
            st.rerun()

with col2:
    st.subheader("‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤")
    if st.session_state.cart:
        df_cart = pd.DataFrame(st.session_state.cart)
        st.table(df_cart)
        total = df_cart['‡∏£‡∏≤‡∏Ñ‡∏≤'].sum()
        st.write(f"### ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: {total} ‡∏ö‡∏≤‡∏ó")
        if st.button("‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤"):
            st.session_state.cart = []
            st.rerun()
    else:
        st.write("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤")